<% user_reacted = current_user && post.reactions.exists?(user: current_user) %>
<% if user_signed_in? %>
  <div class="relative group flex-1" style="position: relative;">
    <button type="button" class="w-full py-2 px-3 text-center rounded-lg hover:bg-slate-700/50 text-slate-300 transition font-semibold text-sm bg-transparent border-0 cursor-pointer active:bg-slate-600">
      ðŸ˜Š React
    </button>

    <!-- Reaction Picker (Hidden by default) -->
    <div class="absolute bottom-full left-0 mb-2 hidden group-hover:block bg-slate-900/95 backdrop-blur-md border border-slate-700/50 rounded-lg shadow-xl p-2 z-50" style="white-space: nowrap;">
      <% ["ðŸ˜‚", "ðŸ˜", "ðŸ˜®", "ðŸ˜¢", "ðŸ˜¡", "ðŸ”¥", "ðŸ‘Œ", "ðŸ™Œ"].each do |emoji| %>
        <%= button_to emoji, post_reactions_path(post), 
        method: :post,
        params: { reaction: { reaction_type: emoji } },
        data: {turbo_stream: true},
        class: "inline-block px-2 py-1 hover:bg-slate-800/50 rounded text-lg bg-transparent border-0 cursor-pointer" %>
        
      <% end %>
    </div>
  </div>
<% else %>
  <%= link_to "ðŸ˜Š React", user_session_path, class: "flex-1 py-2 px-3 text-center rounded-lg hover:bg-slate-700/50 text-slate-300 transition font-semibold text-sm" %>
<% end %>
